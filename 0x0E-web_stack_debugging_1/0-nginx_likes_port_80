#!/usr/bin/env bash
# This script configures Nginx to listen on port 80 of all active IPv4 IPs.

# Ensure Nginx is installed
apt-get update -y
apt-get install -y nginx

# Modify Nginx configuration to listen on port 80
sed -i 's/listen 80 default_server;/listen 0.0.0.0:80 default_server;/' /etc/nginx/sites-available/default

# Restart Nginx to apply changes
service nginx restart

# Allow port 80 through the firewall (if needed)
ufw allow 'Nginx HTTP'

# Verify that Nginx is running and listening on port 80
curl -sI http://localhost:80 | grep "200 OK"
